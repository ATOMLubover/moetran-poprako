# 需求文档

## 总体概述

moetran-native 是一个对尨译（MoeTran 托管网站）的本地客户端。尨译是一个 SaaS 翻译、校对一体化，且带项目列表的 Web 漫画翻译网站。

现在，为了解决它如下的问题，决定设计一个 native 的客户端：

- 作为一个 SaaS 服务，无法将漫画下载到本地，以在网络状况不好的情况下进行翻译和校对。
- 项目管理不够方便，无法方便地根据各种筛选条件（翻译、校对、嵌字、监修、发布状态等）展现美观的项目列表，并加以管理。
- 仅集成了校对和翻译，没有集成嵌字、监修相关状态的追踪。

## 前置信息

所有用户（user）都在尨译中都有一个账户，有自己的昵称和头像。

每个用户可以加入若干汉化组（team），每个汉化组有自己的 ID（string 类型）。

每个汉化组有若干项目集（workset），每个项目集有自己的 ID（string 类型）。

每个项目集有若干项目（project），每个项目有自己的 ID（string 类型）。

每个项目有若干漫画页（page），每个页上有若干翻译源（source）。

每个项目进入翻译页面时，虽然是进入的特定页，但是已经是通过接口获取到所有漫画页的列表了。

进入特定页后，可以通过接口获取该页的所有翻译源。

翻译源分为空、翻译完成状态和校对完成状态，具有相对当前页漫画图片文件的相对坐标。且翻译源分为框内和框外。

## 核心页面（获取实际信息的接口函数可以暂时 mock，格式参见 .style.md 文件）

- [ ] 登录页面（邮箱、密码、captcha 验证码 base64 形式）
- [ ] 项目详情页（可以预览漫画第一页，和包括项目名、作者名、编号、页数、翻译完成源数、校对完成源数、空源数、分工情况（有哪几个翻译，以及校对、嵌字、监修）、框内源数、框外源数）
- [ ] 项目列表（默认显示最新若干个项目，通过屏幕尺寸动态计算）
- [x] 项目翻译页面（左侧为图片显示区，可以缩放当前页漫画图片、添加/删除翻译源的标记（标记只是一个框框），右边为 sidebar，显示当前页上有的源的列表，如果无翻译则 text 显示为空，有翻译则显示翻译文本，每个翻译源 item 以颜色区分空、翻译完成、校对完成；点击某个翻译源的标记或者列表 item 后，会以一个悬浮窗的形式显示输入区，输入翻译后会自动同步到列表 item 中，悬浮窗可以拖动到任意位置）

## 额外实现

- 神人翻译合集
